<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Birthday Wishes</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
  <style id="app-style">
    @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600;700&display=swap');
    
    :root {
      --primary-color: #FF97C1;
      --secondary-color: #97C1FF;
      --accent-color: #FFD700;
      --light-color: #FFFFFF;
      --bg-gradient: linear-gradient(135deg, #FFEFEF, #EFF6FF);
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-gradient);
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    .birthday-title {
      font-family: 'Dancing Script', cursive;
      background: linear-gradient(to right, var(--primary-color), var(--accent-color), var(--secondary-color));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0px 3px 8px rgba(0,0,0,0.1);
    }
    
    .cake-container {
      position: relative;
      width: 100%;
      height: 300px;
    }
    
    .photo-upload-area {
      border: 3px dashed var(--primary-color);
      border-radius: 15px;
      transition: all 0.3s ease;
    }
    
    .photo-upload-area:hover {
      border-color: var(--accent-color);
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
    }
    
    .swiper {
      width: 100%;
      height: 300px;
      border-radius: 15px;
      overflow: hidden;
    }
    
    .swiper-slide img {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 15px;
    }
    
    .audio-player {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      border: 2px solid var(--accent-color);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    .play-btn {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: var(--accent-color);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 0 15px var(--accent-color);
      animation: pulse 2s infinite;
    }
    
    .sound-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      z-index: 100;
    }
    
    .message-btn {
      background: var(--secondary-color);
      color: white;
      border-radius: 30px;
      padding: 12px 25px;
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .message-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      backdrop-filter: blur(5px);
    }
    
    .modal-content {
      background: white;
      width: 90%;
      max-width: 500px;
      border-radius: 20px;
      padding: 30px;
      margin: 50px auto;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      transform: scale(0.9);
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .modal.show {
      display: block;
    }
    
    .modal.show .modal-content {
      transform: scale(1);
      opacity: 1;
    }
    
    /* Floating decorations */
    .balloon {
      position: absolute;
      width: 40px;
      height: 50px;
      background: var(--primary-color);
      border-radius: 50%;
      animation: float 8s ease-in-out infinite;
      z-index: -1;
    }
    
    .balloon::before {
      content: "";
      position: absolute;
      width: 5px;
      height: 50px;
      background: rgba(0,0,0,0.1);
      bottom: -50px;
      left: 50%;
      transform: translateX(-50%);
    }
    
    .balloon:nth-child(2n) {
      background: var(--secondary-color);
      animation-delay: 1s;
    }
    
    .balloon:nth-child(3n) {
      background: var(--accent-color);
      animation-delay: 2s;
    }
    
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background: var(--accent-color);
      animation: fall 8s linear infinite;
      z-index: -1;
    }
    
    .confetti:nth-child(2n) {
      background: var(--primary-color);
      width: 8px;
      height: 8px;
      animation-delay: 1s;
    }
    
    .confetti:nth-child(3n) {
      background: var(--secondary-color);
      width: 12px;
      height: 12px;
      animation-delay: 2s;
    }
    
    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.7);
      }
      70% {
        box-shadow: 0 0 0 15px rgba(255, 215, 0, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(255, 215, 0, 0);
      }
    }
    
    @keyframes float {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      50% {
        transform: translateY(-20px) rotate(5deg);
      }
    }
    
    @keyframes fall {
      0% {
        transform: translateY(-100px) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }
    
    /* Responsive adjustments */
    @media (max-width: 640px) {
      .cake-container {
        height: 200px;
      }
      
      .swiper {
        height: 200px;
      }
    }
  </style>
</head>
<body class="px-4 py-8 md:px-8">
  <!-- Background decorations -->
  <div class="decorations">
    <div class="balloon" style="top: 10%; left: 5%;"></div>
    <div class="balloon" style="top: 20%; left: 80%;"></div>
    <div class="balloon" style="top: 40%; left: 15%;"></div>
    <div class="balloon" style="top: 60%; left: 90%;"></div>
    <div class="balloon" style="top: 80%; left: 30%;"></div>
    
    <div class="confetti" style="left: 10%;"></div>
    <div class="confetti" style="left: 25%;"></div>
    <div class="confetti" style="left: 40%;"></div>
    <div class="confetti" style="left: 55%;"></div>
    <div class="confetti" style="left: 70%;"></div>
    <div class="confetti" style="left: 85%;"></div>
  </div>

  <!-- Main content -->
  <div class="max-w-4xl mx-auto">
    <!-- Header section with editable name -->
    <div class="text-center mb-8">
      <h1 class="birthday-title text-5xl md:text-7xl mb-2 animate__animated animate__bounceIn">
        Happy Birthday <span id="birthday-name" class="relative cursor-pointer" title="Click to edit">
          <span id="name-display">Name</span>
          <i class="fas fa-pencil text-sm ml-2 opacity-50"></i>
        </span> ðŸŽ‰
      </h1>
      <input type="text" id="name-input" class="hidden border-b-2 border-accent-color bg-transparent text-center text-5xl md:text-7xl birthday-title outline-none" value="Name">
      
      <!-- Age input -->
      <div class="mt-4 flex justify-center items-center">
        <label class="text-lg text-gray-600 mr-2">Age:</label>
        <input type="number" id="age-input" min="1" max="150" value="25" class="w-16 p-2 rounded-lg border-2 border-primary text-center text-xl font-bold">
      </div>
    </div>

    <!-- Main content grid -->
    <div class="grid md:grid-cols-2 gap-8">
      <!-- Photo carousel section -->
      <div class="photo-section">
        <h2 class="text-2xl font-bold mb-4 text-gray-700">Photo Gallery</h2>
        
        <!-- Photo upload area (initially visible) -->
        <div id="upload-area" class="photo-upload-area flex flex-col items-center justify-center p-8 mb-4 cursor-pointer">
          <i class="fas fa-cloud-upload-alt text-4xl text-primary-color mb-3"></i>
          <p class="text-center text-gray-600">Click to upload photos<br><span class="text-sm">(or drag and drop)</span></p>
          <input type="file" id="photo-upload" class="hidden" accept="image/*" multiple>
        </div>
        
        <!-- Photo carousel (initially hidden) -->
        <div id="photo-carousel" class="hidden">
          <div class="swiper mySwiper">
            <div class="swiper-wrapper">
              <!-- Default images (will be replaced by uploaded ones) -->
              <div class="swiper-slide">
                <img src="https://cdn.pixabay.com/photo/2016/11/22/18/52/cake-1850011_1280.jpg" alt="Birthday cake">
              </div>
              <div class="swiper-slide">
                <img src="https://cdn.pixabay.com/photo/2017/05/19/12/38/fantasy-2326462_1280.jpg" alt="Birthday celebration">
              </div>
              <div class="swiper-slide">
                <img src="https://cdn.pixabay.com/photo/2016/12/31/21/22/discus-seniflorus-1943755_1280.jpg" alt="Party decoration">
              </div>
            </div>
            <div class="swiper-pagination"></div>
            <div class="swiper-button-next text-white"></div>
            <div class="swiper-button-prev text-white"></div>
          </div>
        </div>
      </div>
      
      <!-- 3D Cake and audio section -->
      <div>
        <!-- 3D cake container -->
        <div class="cake-container mb-8" id="cake-scene">
          <!-- 3D Cake will be rendered here by Three.js -->
          <div class="w-full h-full flex items-center justify-center">
            <div class="animate__animated animate__tada">
              <img src="https://cdn.pixabay.com/photo/2013/07/12/12/54/cake-146874_1280.png" alt="Birthday Cake" class="h-40 md:h-64">
              <div id="cake-age" class="text-center mt-2 text-3xl font-bold text-primary-color">25</div>
            </div>
          </div>
        </div>
        
        <!-- Voice message player -->
        <div class="audio-player p-6 mb-8">
          <h2 class="text-xl font-bold mb-3 text-gray-700">Birthday Wish Voice Message</h2>
          <div class="flex items-center">
            <div id="play-button" class="play-btn mr-4">
              <i class="fas fa-play text-white text-2xl"></i>
            </div>
            <div class="flex-1">
              <div class="h-2 bg-gray-200 rounded-full">
                <div id="progress-bar" class="h-2 bg-primary-color rounded-full" style="width: 0%"></div>
              </div>
              <div class="flex justify-between mt-2">
                <span id="current-time" class="text-sm text-gray-600">0:00</span>
                <span id="duration" class="text-sm text-gray-600">0:30</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Custom message button -->
        <div class="text-center">
          <button id="message-btn" class="message-btn">
            <i class="fas fa-envelope mr-2"></i> Write a Message
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Message modal -->
  <div id="message-modal" class="modal">
    <div class="modal-content">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-2xl font-bold text-gray-800">Your Birthday Message</h3>
        <button id="close-modal" class="text-gray-500 hover:text-gray-800 text-2xl">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <textarea id="message-text" class="w-full h-40 p-4 border-2 border-secondary-color rounded-lg mb-4" placeholder="Type your birthday wishes here..."></textarea>
      
      <div class="flex justify-between">
        <button id="reset-message" class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300">
          <i class="fas fa-redo mr-1"></i> Reset
        </button>
        <button id="save-message" class="px-4 py-2 bg-accent-color text-white rounded-lg hover:bg-yellow-500">
          <i class="fas fa-save mr-1"></i> Save Message
        </button>
      </div>
    </div>
  </div>
  
  <!-- Sound toggle button -->
  <div id="sound-toggle" class="sound-toggle">
    <i class="fas fa-music text-primary-color"></i>
  </div>
  
  <!-- Load scripts -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script id="app-script">
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize state
      const state = {
        name: localStorage.getItem('birthdayName') || 'Name',
        age: localStorage.getItem('birthdayAge') || 25,
        message: localStorage.getItem('birthdayMessage') || '',
        soundOn: localStorage.getItem('soundOn') === 'true' || true,
        photos: JSON.parse(localStorage.getItem('birthdayPhotos')) || []
      };
      
      // DOM elements
      const nameDisplay = document.getElementById('name-display');
      const nameInput = document.getElementById('name-input');
      const birthdayName = document.getElementById('birthday-name');
      const ageInput = document.getElementById('age-input');
      const cakeAge = document.getElementById('cake-age');
      const uploadArea = document.getElementById('upload-area');
      const photoUpload = document.getElementById('photo-upload');
      const photoCarousel = document.getElementById('photo-carousel');
      const messageBtn = document.getElementById('message-btn');
      const messageModal = document.getElementById('message-modal');
      const closeModal = document.getElementById('close-modal');
      const messageText = document.getElementById('message-text');
      const saveMessage = document.getElementById('save-message');
      const resetMessage = document.getElementById('reset-message');
      const soundToggle = document.getElementById('sound-toggle');
      const playButton = document.getElementById('play-button');
      const progressBar = document.getElementById('progress-bar');
      const currentTimeDisplay = document.getElementById('current-time');
      
      // Initialize with saved data
      nameDisplay.textContent = state.name;
      ageInput.value = state.age;
      cakeAge.textContent = state.age;
      messageText.value = state.message;
      
      // Update sound toggle icon
      updateSoundToggleIcon();
      
      // Setup name editing
      birthdayName.addEventListener('click', function() {
        nameDisplay.classList.add('hidden');
        nameInput.classList.remove('hidden');
        nameInput.value = nameDisplay.textContent;
        nameInput.focus();
      });
      
      nameInput.addEventListener('blur', function() {
        saveName();
      });
      
      nameInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          saveName();
        }
      });
      
      function saveName() {
        const newName = nameInput.value.trim();
        if (newName) {
          nameDisplay.textContent = newName;
          state.name = newName;
          localStorage.setItem('birthdayName', newName);
        }
        nameInput.classList.add('hidden');
        nameDisplay.classList.remove('hidden');
      }
      
      // Age input handling
      ageInput.addEventListener('change', function() {
        const newAge = parseInt(ageInput.value);
        if (newAge > 0 && newAge <= 150) {
          state.age = newAge;
          cakeAge.textContent = newAge;
          localStorage.setItem('birthdayAge', newAge);
        }
      });
      
      // Photo upload handling
      uploadArea.addEventListener('click', function() {
        photoUpload.click();
      });
      
      photoUpload.addEventListener('change', function(e) {
        if (e.target.files.length > 0) {
          handleFileUpload(e.target.files);
        }
      });
      
      uploadArea.addEventListener('dragover', function(e) {
        e.preventDefault();
        uploadArea.classList.add('border-accent-color');
      });
      
      uploadArea.addEventListener('dragleave', function() {
        uploadArea.classList.remove('border-accent-color');
      });
      
      uploadArea.addEventListener('drop', function(e) {
        e.preventDefault();
        uploadArea.classList.remove('border-accent-color');
        if (e.dataTransfer.files.length > 0) {
          handleFileUpload(e.dataTransfer.files);
        }
      });
      
      function handleFileUpload(files) {
        // Since we can't actually upload files in this prototype,
        // we'll simulate by showing the default images
        photoCarousel.classList.remove('hidden');
        uploadArea.classList.add('hidden');
        
        // Initialize Swiper carousel
        const swiper = new Swiper('.mySwiper', {
          effect: 'fade',
          grabCursor: true,
          centeredSlides: true,
          slidesPerView: 'auto',
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
          autoplay: {
            delay: 3000,
            disableOnInteraction: false,
          },
        });
      }
      
      // Message modal handling
      messageBtn.addEventListener('click', function() {
        messageModal.classList.add('show');
      });
      
      closeModal.addEventListener('click', function() {
        messageModal.classList.remove('show');
      });
      
      saveMessage.addEventListener('click', function() {
        state.message = messageText.value;
        localStorage.setItem('birthdayMessage', state.message);
        messageModal.classList.remove('show');
      });
      
      resetMessage.addEventListener('click', function() {
        messageText.value = '';
        state.message = '';
        localStorage.setItem('birthdayMessage', '');
      });
      
      // Sound toggle
      soundToggle.addEventListener('click', function() {
        state.soundOn = !state.soundOn;
        localStorage.setItem('soundOn', state.soundOn);
        updateSoundToggleIcon();
        
        // Toggle background music (if it was playing)
        // In a real implementation, this would control actual audio
      });
      
      function updateSoundToggleIcon() {
        const icon = soundToggle.querySelector('i');
        if (state.soundOn) {
          icon.className = 'fas fa-music text-primary-color';
        } else {
          icon.className = 'fas fa-volume-mute text-gray-400';
        }
      }
      
      // Voice message player
      let isPlaying = false;
      
      playButton.addEventListener('click', function() {
        if (isPlaying) {
          playButton.innerHTML = '<i class="fas fa-play text-white text-2xl"></i>';
          isPlaying = false;
          progressBar.style.width = '0%';
          currentTimeDisplay.textContent = '0:00';
        } else {
          playButton.innerHTML = '<i class="fas fa-pause text-white text-2xl"></i>';
          isPlaying = true;
          
          // Simulate audio playback (would be replaced with real audio)
          let progress = 0;
          const duration = 30; // 30 seconds for demo
          
          const interval = setInterval(() => {
            progress += 1;
            const percentage = (progress / duration) * 100;
            progressBar.style.width = `${percentage}%`;
            
            // Format time
            const minutes = Math.floor(progress / 60);
            const seconds = progress % 60;
            currentTimeDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            if (progress >= duration) {
              clearInterval(interval);
              playButton.innerHTML = '<i class="fas fa-play text-white text-2xl"></i>';
              isPlaying = false;
            }
          }, 1000);
        }
      });
      
      // Close modal when clicking outside
      window.addEventListener('click', function(e) {
        if (e.target === messageModal) {
          messageModal.classList.remove('show');
        }
      });
      
      // Add confetti animation
      function createConfetti() {
        const confettiColors = ['#FF97C1', '#97C1FF', '#FFD700', '#FFFFFF'];
        
        for (let i = 0; i < 50; i++) {
          const confetti = document.createElement('div');
          confetti.classList.add('confetti');
          confetti.style.left = Math.random() * 100 + 'vw';
          confetti.style.animationDelay = Math.random() * 5 + 's';
          confetti.style.background = confettiColors[Math.floor(Math.random() * confettiColors.length)];
          document.querySelector('.decorations').appendChild(confetti);
        }
      }
      
      createConfetti();
    });
  </script>
</body>
</html>
